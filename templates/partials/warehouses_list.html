{{ define "warehouses_list.html" }}
<div class="table-container">
    <table class="table">
        <thead>
            <tr>
                <th>–°–∫–ª–∞–¥</th>
                <th>–¢–∏–ø</th>
                <th>–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</th>
                <th>–ê—Ä—Ç–∏–∫—É–ª</th>
                <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                <th>–ú–∏–Ω/–ú–∞–∫—Å</th>
                <th>–°—Ç–∞—Ç—É—Å –∑–∞–ø–∞—Å–∞</th>
                <th>–¶–µ–Ω–∞ –∑–∞ –µ–¥. (‚ÇΩ)</th>
                <th>–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å (‚ÇΩ)</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
        </thead>
        <tbody>
            {{range .Inventory}}
            <tr class="inventory-row {{if lt .Quantity .MinStockLevel}}low-stock{{else if eq .Quantity 0}}out-of-stock{{end}}">
                <td>
                    <strong>{{.WarehouseName}}</strong>
                    <div style="font-size: 0.75rem; color: var(--text-secondary);">
                        {{.WarehouseAddress}}
                    </div>
                </td>
                <td>
                    <span class="item-type-badge {{.ItemType}}">
                        {{if eq .ItemType "vending_machine"}}–ê–≤—Ç–æ–º–∞—Ç
                        {{else if eq .ItemType "toy"}}–ò–≥—Ä—É—à–∫–∞
                        {{else}}–ö–∞–ø—Å—É–ª–∞{{end}}
                    </span>
                </td>
                <td>
                    <div style="font-weight: 500;">{{.ItemName}}</div>
                    {{if .Description}}
                    <div style="font-size: 0.75rem; color: var(--text-secondary); margin-top: 0.25rem;">
                        {{.Description}}
                    </div>
                    {{end}}
                </td>
                <td>
                    <code style="padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem;">
                        {{.SKU}}
                    </code>
                </td>
                <td>
                    <span style="font-weight: 600; font-size: 1.1rem;">{{.Quantity}}</span>
                    <div style="font-size: 0.75rem; color: var(--text-secondary);">
                        –µ–¥.
                    </div>
                </td>
                <td>
                    <div style="font-size: 0.875rem;">
                        <div>–ú–∏–Ω: {{.MinStockLevel}}</div>
                        <div>–ú–∞–∫—Å: {{.MaxStockLevel}}</div>
                    </div>
                </td>
                <td>
                    <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä -->
                    <div style="margin-top: 0.5rem;">
                        <div style="background: var(--bg-secondary); height: 4px; border-radius: 2px; overflow: hidden;">
                            <div style="background: {{if lt .Quantity .MinStockLevel}}var(--warning){{else if eq .Quantity 0}}var(--danger){{else}}var(--success){{end}}; 
                                        height: 100%; width: {{if gt .MaxStockLevel 0}}{{percent .Quantity .MaxStockLevel}}%{{else}}0%{{end}};">
                            </div>
                        </div>
                    </div>
                </td>
                <td>
                    <span style="font-weight: 500;">{{printf "%.2f" .UnitPrice}} ‚ÇΩ</span>
                </td>
                <td>
                    <span style="font-weight: 600; color: var(--primary);">
                        {{printf "%.2f" (mult .Quantity .UnitPrice)}} ‚ÇΩ
                    </span>
                </td>
                <td>
                    <div>
                        <button class="btn btn-primary"
                                onclick="showQuickAction({{.ID}}, 'adjust')"
                                title="–ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞">
                            üìä
                        </button>
                        <button class="btn btn-secondary"
                                onclick="showQuickAction({{.ID}}, 'transfer')"
                                title="–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –º–µ–∂–¥—É —Å–∫–ª–∞–¥–∞–º–∏">
                            üîÑ
                        </button>
                        <button class="btn btn-warning"
                                hx-get="/warehouses/inventory-form?id={{.ID}}"
                                hx-target="#modal-body"
                                onclick="VendERP.showModal()"
                                title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å">
                            ‚úèÔ∏è
                        </button>
                        <button class="btn btn-danger"
                                hx-delete="/warehouses/inventory-delete?id={{.ID}}"
                                hx-target="#warehouses-table"
                                hx-confirm="–£–¥–∞–ª–∏—Ç—å —ç—Ç—É –ø–æ–∑–∏—Ü–∏—é –∏–∑ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è?"
                                title="–£–¥–∞–ª–∏—Ç—å">
                            üóëÔ∏è
                        </button>
                    </div>
                </td>
            </tr>
            {{else}}
            <tr>
                <td colspan="10" style="text-align: center; padding: 3rem; color: var(--secondary);">
                    üì≠ –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—é
                    <div style="margin-top: 1rem;">
                        <button class="btn btn-primary"
                                hx-get="/warehouses/inventory-form"
                                hx-target="#modal-body"
                                onclick="VendERP.showModal()">
                            ‚ûï –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤—É—é –ø–æ–∑–∏—Ü–∏—é
                        </button>
                    </div>
                </td>
            </tr>
            {{end}}
        </tbody>
    </table>
</div>

<!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–Ω–∏–∑—É -->
{{if .Inventory}}
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 2rem;">
    <div class="stat-card">
        <div class="stat-value">{{.TotalValue}}</div>
        <div class="stat-label">–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">{{.LowStockCount}}</div>
        <div class="stat-label">–ü–æ–∑–∏—Ü–∏–π —Å –Ω–∏–∑–∫–∏–º –∑–∞–ø–∞—Å–æ–º</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">{{.OutOfStockCount}}</div>
        <div class="stat-label">–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–∑–∏—Ü–∏–π</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">{{.TotalWarehouses}}</div>
        <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö —Å–∫–ª–∞–¥–æ–≤</div>
    </div>
</div>
{{end}}

<style>
.inventory-row.low-stock {
    background: rgba(255, 193, 7, 0.05);
    border-left: 3px solid var(--warning);
}

.inventory-row.out-of-stock {
    background: rgba(220, 53, 69, 0.05);
    border-left: 3px solid var(--danger);
}

.item-type-badge {
    padding: 0.25rem 0.5rem;
    border-radius: 6px;
    font-size: 0.75rem;
    font-weight: 500;
}

.item-type-badge.vending_machine {
    background: rgba(59, 130, 246, 0.1);
    color: var(--primary);
    border: 1px solid var(--primary);
}

.item-type-badge.toy {
    background: rgba(34, 197, 94, 0.1);
    color: var(--success);
    border: 1px solid var(--success);
}

.item-type-badge.capsule {
    background: rgba(168, 85, 247, 0.1);
    color: var(--purple);
    border: 1px solid var(--purple);
}

.stat-card {
    padding: 1.5rem;
    border-radius: 8px;
    text-align: center;
    border: 1px solid var(--border);
}

.stat-value {
    font-size: 2rem;
    font-weight: 700;
    color: var(--primary);
    margin-bottom: 0.5rem;
}

.stat-label {
    font-size: 0.875rem;
    color: var(--text-secondary);
}

.btn-sm {
    padding: 0.375rem 0.75rem;
    font-size: 0.75rem;
}
</style>
{{ end }}