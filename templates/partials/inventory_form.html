{{ define "inventory_form.html" }}
<form hx-post="/warehouses/inventory-save" hx-target="#warehouses-table">
    <input type="hidden" name="id" value="{{.InventoryItem.ID}}">
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
        <div class="form-group">
            <label class="form-label">Склад</label>
            <select name="warehouse_id" class="form-select" required>
                <option value="">Выберите склад</option>
                {{range .Warehouses}}
                <option value="{{.ID}}" {{if eq .ID $.InventoryItem.WarehouseID}}selected{{end}}>
                    {{.Name}} - {{.Address}}
                </option>
                {{end}}
            </select>
        </div>
        
        <div class="form-group">
            <label class="form-label">Тип товара</label>
            <select name="item_type" class="form-select" required>
                <option value="">Выберите тип</option>
                <option value="vending_machine" {{if eq .InventoryItem.ItemType "vending_machine"}}selected{{end}}>Вендинговый автомат</option>
                <option value="toy" {{if eq .InventoryItem.ItemType "toy"}}selected{{end}}>Игрушка</option>
                <option value="capsule" {{if eq .InventoryItem.ItemType "capsule"}}selected{{end}}>Капсула</option>
            </select>
        </div>
    </div>

    <div class="form-group">
        <label class="form-label">Наименование</label>
        <input type="text" name="item_name" value="{{.InventoryItem.ItemName}}" 
               class="form-input" required placeholder="Например: ToyMaster 3000">
    </div>

    <div class="form-group">
        <label class="form-label">Описание</label>
        <textarea name="description" class="form-input" rows="2"
                  placeholder="Описание товара или характеристики">{{.InventoryItem.Description}}</textarea>
    </div>

    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem;">
        <div class="form-group">
            <label class="form-label">Артикул (SKU)</label>
            <input type="text" name="sku" value="{{.InventoryItem.SKU}}" 
                   class="form-input" required placeholder="VM-TM3000">
        </div>
        
        <div class="form-group">
            <label class="form-label">Категория</label>
            <select name="category_id" class="form-select" required>
                <option value="">Выберите категорию</option>
                {{range .Categories}}
                <option value="{{.ID}}" {{if eq .ID $.InventoryItem.CategoryID}}selected{{end}}>
                    {{.Name}}
                </option>
                {{end}}
            </select>
        </div>
        
        <div class="form-group">
            <label class="form-label">Цена за единицу (₽)</label>
            <input type="number" step="0.01" name="unit_price" value="{{.InventoryItem.UnitPrice}}" 
                   class="form-input" min="0" required>
        </div>
    </div>

    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem;">
        <div class="form-group">
            <label class="form-label">Текущее количество</label>
            <input type="number" name="quantity" value="{{.InventoryItem.Quantity}}" 
                   class="form-input" min="0" required>
        </div>
        
        <div class="form-group">
            <label class="form-label">Минимальный запас</label>
            <input type="number" name="min_stock_level" value="{{.InventoryItem.MinStockLevel}}" 
                   class="form-input" min="0" required>
            <div class="form-help">Триггер для уведомлений</div>
        </div>
        
        <div class="form-group">
            <label class="form-label">Максимальный запас</label>
            <input type="number" name="max_stock_level" value="{{.InventoryItem.MaxStockLevel}}" 
                   class="form-input" min="1" required>
            <div class="form-help">Лимит хранения</div>
        </div>
    </div>

    <div style="display: flex; gap: 1rem; justify-content: flex-end; margin-top: 2rem;">
        <button type="button" class="btn" onclick="document.getElementById('modal').style.display = 'none'; document.getElementById('modal-body').innerHTML = '';">Отмена</button>
        <button type="submit" class="btn btn-primary">
            {{if .Edit}}Обновить{{else}}Создать{{end}}
        </button>
    </div>
</form>
{{ end }}