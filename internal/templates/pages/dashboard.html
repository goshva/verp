{{ define "dashboard.html" }}
{{ template "base.html" . }}
{{ end }}

{{ define "content" }}
<div class="header" style="margin-bottom: 2rem;">
    <h1>üìä –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è VendERP</h1>
    <p style="color: var(--secondary); margin-top: 0.5rem;">–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–µ–Ω–¥–∏–Ω–≥–æ–≤—ã–º–∏ –∞–≤—Ç–æ–º–∞—Ç–∞–º–∏</p>
</div>

<div class="stats-grid" id="stats-grid" hx-get="/api/stats" hx-trigger="load">
    {{ template "stat_card" dict "Label" "–í—Å–µ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–æ–≤" "Value" "-" }}
    {{ template "stat_card" dict "Label" "–ê–∫—Ç–∏–≤–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç—ã" "Value" "-" }}
    {{ template "stat_card" dict "Label" "–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π" "Value" "-" }}
    {{ template "stat_card" dict "Label" "–í—Å–µ–≥–æ –ª–æ–∫–∞—Ü–∏–π" "Value" "-" }}
    {{ template "stat_card" dict "Label" "–û–±—â–∞—è –≤—ã—Ä—É—á–∫–∞" "Value" "-" }}
    {{ template "stat_card" dict "Label" "–û–∂–∏–¥–∞—é—â–∏–µ –∑–∞–¥–∞—á–∏" "Value" "-" }}
</div>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
    {{ template "card" dict 
        "Title" "–ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏"
        "Content" `<div id="recent-users" hx-get="/users" hx-trigger="load" hx-target="this">–ó–∞–≥—Ä—É–∑–∫–∞...</div>`
    }}
    
    {{ template "card" dict 
        "Title" "–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç—ã"
        "Content" `<div id="recent-machines" hx-get="/machines" hx-trigger="load" hx-target="this">–ó–∞–≥—Ä—É–∑–∫–∞...</div>`
    }}
</div>

{{ template "card" dict 
    "Title" "üìç –ê–∫—Ç–∏–≤–Ω—ã–µ –ª–æ–∫–∞—Ü–∏–∏"
    "Content" `
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
        <h3>üìç –ê–∫—Ç–∏–≤–Ω—ã–µ –ª–æ–∫–∞—Ü–∏–∏</h3>
        <button class="btn btn-primary"
                hx-get="/locations/form"
                hx-target="#modal-body"
                onclick="VendERP.showModal()">
            ‚ûï –î–æ–±–∞–≤–∏—Ç—å –ª–æ–∫–∞—Ü–∏—é
        </button>
    </div>
    <div id="locations-table" hx-get="/locations" hx-trigger="load">
        –ó–∞–≥—Ä—É–∑–∫–∞ –ª–æ–∫–∞—Ü–∏–π...
    </div>`
}}

<script>
    document.addEventListener('DOMContentLoaded', function() {
        setInterval(() => {
            htmx.ajax('GET', '/api/stats', { target: '#stats-grid' });
        }, 30000);
    });
</script>
{{ end }}
