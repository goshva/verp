{{ define "dashboard.html" }}
{{ template "base.html" . }}
{{ end }}

{{ define "content" }}
<div class="header" style="margin-bottom: 2rem;">
    <h1>üìä –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è VendERP</h1>
    <p style="color: var(--secondary); margin-top: 0.5rem;">–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–µ–Ω–¥–∏–Ω–≥–æ–≤—ã–º–∏ –∞–≤—Ç–æ–º–∞—Ç–∞–º–∏</p>
</div>

<div class="stats-grid" id="stats-grid" hx-get="/api/stats" hx-trigger="load">
    <div class="stat-card">
        <div class="stat-label">–í—Å–µ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–æ–≤</div>
        <div class="stat-number">-</div>
    </div>
    <div class="stat-card">
        <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç—ã</div>
        <div class="stat-number">-</div>
    </div>
    <div class="stat-card">
        <div class="stat-label">–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
        <div class="stat-number">-</div>
    </div>
    <div class="stat-card">
        <div class="stat-label">–í—Å–µ–≥–æ –ª–æ–∫–∞—Ü–∏–π</div>
        <div class="stat-number">-</div>
    </div>
    <div class="stat-card">
        <div class="stat-label">–û–±—â–∞—è –≤—ã—Ä—É—á–∫–∞</div>
        <div class="stat-number">-</div>
    </div>
    <div class="stat-card">
        <div class="stat-label">–û–∂–∏–¥–∞—é—â–∏–µ –∑–∞–¥–∞—á–∏</div>
        <div class="stat-number">-</div>
    </div>
</div>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
    <div class="card">
        <h3>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h3>
        <div id="recent-users" hx-get="/users" hx-trigger="load" hx-target="this">
            –ó–∞–≥—Ä—É–∑–∫–∞...
        </div>
    </div>
    
    <div class="card">
        <h3>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç—ã</h3>
        <div id="recent-machines" hx-get="/machines" hx-trigger="load" hx-target="this">
            –ó–∞–≥—Ä—É–∑–∫–∞...
        </div>
    </div>
</div>

<div class="card">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
        <h3>üìç –ê–∫—Ç–∏–≤–Ω—ã–µ –ª–æ–∫–∞—Ü–∏–∏</h3>
        <button class="btn btn-primary" 
                hx-get="/locations/form" 
                hx-target="#modal-body"
                onclick="showModal()">
            ‚ûï –î–æ–±–∞–≤–∏—Ç—å –ª–æ–∫–∞—Ü–∏—é
        </button>
    </div>
    <div id="locations-table" hx-get="/locations" hx-trigger="load">
        –ó–∞–≥—Ä—É–∑–∫–∞ –ª–æ–∫–∞—Ü–∏–π...
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
        setInterval(() => {
            htmx.ajax('GET', '/api/stats', { target: '#stats-grid' });
        }, 30000);
    });
</script>
{{ end }}